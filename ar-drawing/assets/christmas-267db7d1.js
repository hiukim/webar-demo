import{G as b,R}from"./GLTFLoader-48ae2cff.js";const x=new URL(""+new URL("target-christmas-505e29cc.zpt",import.meta.url).href,self.location).href,H=f=>new Promise(i=>{const e=new URL(""+new URL("christmas-7edcb45b.glb",import.meta.url).href,self.location).href;f.load(e,t=>{i(t)})});window.addEventListener("DOMContentLoaded",async f=>{const i=new ZapparThree.LoadingManager,e=new THREE.WebGLRenderer({preserveDrawingBuffer:!0});document.body.appendChild(e.domElement),e.setSize(window.innerWidth,window.innerHeight),window.addEventListener("resize",()=>{e.setSize(window.innerWidth,window.innerHeight)});const t=new ZapparThree.Camera;ZapparThree.glContextSet(e.getContext());const o=new THREE.Scene;o.background=t.backgroundTexture,ZapparThree.permissionRequestUI().then(n=>{n?t.start():ZapparThree.permissionDeniedUI()});const l=new ZapparThree.ImageTrackerLoader(i).load(x),p=new ZapparThree.ImageAnchorGroup(t,l);o.add(p);const h=new b(i),s=await H(h),m=new THREE.AnimationMixer(s.scene);s.animations.forEach(n=>{const c=m.clipAction(n);c.loop=THREE.LoopRepeat,c.play()});const a=s.scene;a.rotation.set(Math.PI/2,0,0),a.position.set(0,0,0),a.scale.set(.2,.2,.2),a.visible=!1,p.add(a),console.log("gltf",s);const w=new THREE.AmbientLight(4210752,2);o.add(w);const u=new THREE.HemisphereLight(16777215,12303359,1);o.add(u);let d=!1;l.onVisible.bind(n=>{setTimeout(()=>{d=!0},500)}),l.onNotVisible.bind(n=>{d=!1,a.visible=!1});const g=new R(t,e);e.setAnimationLoop(T);const L=new THREE.Clock;function T(){const n=L.getDelta();if(m&&m.update(n),t.updateFrame(e),e.render(o,t),d){d=!1;const c=g.capture(p);a.traverse(r=>{r.material&&r.material.name==="paint"&&new THREE.TextureLoader().load(c.toDataURL(),E=>{r.material.map&&r.material.map.dispose(),r.material.map=E,r.material.needsUpdate=!0})}),a.visible=!0}}});
